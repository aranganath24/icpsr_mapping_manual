<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Practice Exercises | A Guide to Mapping ICPSR Data in R Studio</title>
  <meta name="description" content="5 Practice Exercises | A Guide to Mapping ICPSR Data in R Studio" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Practice Exercises | A Guide to Mapping ICPSR Data in R Studio" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Practice Exercises | A Guide to Mapping ICPSR Data in R Studio" />
  
  
  

<meta name="author" content="Aditya Ranganath" />


<meta name="date" content="2022-01-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tutorial.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mapping ICPSR Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>2.1</b> Motivation</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#scope-and-objectives"><i class="fa fa-check"></i><b>2.2</b> Scope and Objectives</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html"><i class="fa fa-check"></i><b>3</b> Preliminaries and Set-Up</a>
<ul>
<li class="chapter" data-level="3.1" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#data"><i class="fa fa-check"></i><b>3.1</b> Data</a></li>
<li class="chapter" data-level="3.2" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#r-and-r-studio-installation"><i class="fa fa-check"></i><b>3.2</b> R and R Studio Installation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#windows-installation-instructions"><i class="fa fa-check"></i><b>3.2.1</b> Windows Installation Instructions</a></li>
<li class="chapter" data-level="3.2.2" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#macos-installation-instructions"><i class="fa fa-check"></i><b>3.2.2</b> macOS Installation Instructions</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#the-r-studio-interface"><i class="fa fa-check"></i><b>3.3</b> The R Studio Interface</a></li>
<li class="chapter" data-level="3.4" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#install-packages"><i class="fa fa-check"></i><b>3.4</b> Install Packages</a></li>
<li class="chapter" data-level="3.5" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#load-libraries"><i class="fa fa-check"></i><b>3.5</b> Load Libraries</a></li>
<li class="chapter" data-level="3.6" data-path="preliminaries-and-set-up.html"><a href="preliminaries-and-set-up.html#set-working-directory"><i class="fa fa-check"></i><b>3.6</b> Set Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tutorial.html"><a href="tutorial.html"><i class="fa fa-check"></i><b>4</b> Tutorial</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tutorial.html"><a href="tutorial.html#load-and-view-data"><i class="fa fa-check"></i><b>4.1</b> Load and View Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="tutorial.html"><a href="tutorial.html#icpsr-covid-19-tabular-data"><i class="fa fa-check"></i><b>4.1.1</b> ICPSR Covid-19 Tabular Data</a></li>
<li class="chapter" data-level="4.1.2" data-path="tutorial.html"><a href="tutorial.html#country-boundaries-spatial-data"><i class="fa fa-check"></i><b>4.1.2</b> Country Boundaries Spatial Data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tutorial.html"><a href="tutorial.html#edit-spatial-data"><i class="fa fa-check"></i><b>4.2</b> Edit Spatial Data</a></li>
<li class="chapter" data-level="4.3" data-path="tutorial.html"><a href="tutorial.html#process-icpsr-tabular-data-for-mapping"><i class="fa fa-check"></i><b>4.3</b> Process ICPSR Tabular Data for Mapping</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tutorial.html"><a href="tutorial.html#select-variables"><i class="fa fa-check"></i><b>4.3.1</b> Select Variables</a></li>
<li class="chapter" data-level="4.3.2" data-path="tutorial.html"><a href="tutorial.html#change-class-of-economic_measures-index"><i class="fa fa-check"></i><b>4.3.2</b> Change class of “Economic_Measures” Index</a></li>
<li class="chapter" data-level="4.3.3" data-path="tutorial.html"><a href="tutorial.html#compute-average-of-economic_measures-index"><i class="fa fa-check"></i><b>4.3.3</b> Compute average of “Economic_Measures” index</a></li>
<li class="chapter" data-level="4.3.4" data-path="tutorial.html"><a href="tutorial.html#calculate-summary-statistics"><i class="fa fa-check"></i><b>4.3.4</b> Calculate Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tutorial.html"><a href="tutorial.html#join-datasets"><i class="fa fa-check"></i><b>4.4</b> Join Datasets</a></li>
<li class="chapter" data-level="4.5" data-path="tutorial.html"><a href="tutorial.html#make-a-print-map"><i class="fa fa-check"></i><b>4.5</b> Make a Print Map</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="tutorial.html"><a href="tutorial.html#make-a-preliminary-map"><i class="fa fa-check"></i><b>4.5.1</b> Make a Preliminary Map</a></li>
<li class="chapter" data-level="4.5.2" data-path="tutorial.html"><a href="tutorial.html#customize-legend"><i class="fa fa-check"></i><b>4.5.2</b> Customize Legend</a></li>
<li class="chapter" data-level="4.5.3" data-path="tutorial.html"><a href="tutorial.html#add-map-title-and-credits"><i class="fa fa-check"></i><b>4.5.3</b> Add Map Title and Credits</a></li>
<li class="chapter" data-level="4.5.4" data-path="tutorial.html"><a href="tutorial.html#final-map-code"><i class="fa fa-check"></i><b>4.5.4</b> Final Map Code</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="tutorial.html"><a href="tutorial.html#export-map"><i class="fa fa-check"></i><b>4.6</b> Export Map</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="tutorial.html"><a href="tutorial.html#export-map-using-tmap"><i class="fa fa-check"></i><b>4.6.1</b> Export Map Using <em>tmap</em></a></li>
<li class="chapter" data-level="4.6.2" data-path="tutorial.html"><a href="tutorial.html#export-map-through-gui"><i class="fa fa-check"></i><b>4.6.2</b> Export Map Through GUI</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="tutorial.html"><a href="tutorial.html#summary"><i class="fa fa-check"></i><b>4.7</b> Summary</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tutorial.html"><a href="tutorial.html#print-map-summary-script"><i class="fa fa-check"></i><b>4.7.1</b> Print Map Summary Script</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="practice-exercises.html"><a href="practice-exercises.html"><i class="fa fa-check"></i><b>5</b> Practice Exercises</a>
<ul>
<li class="chapter" data-level="5.1" data-path="practice-exercises.html"><a href="practice-exercises.html#practice-exercise-1"><i class="fa fa-check"></i><b>5.1</b> Practice Exercise 1</a></li>
<li class="chapter" data-level="5.2" data-path="practice-exercises.html"><a href="practice-exercises.html#practice-exercise-2"><i class="fa fa-check"></i><b>5.2</b> Practice Exercise 2</a></li>
<li class="chapter" data-level="5.3" data-path="practice-exercises.html"><a href="practice-exercises.html#practice-exercise-3"><i class="fa fa-check"></i><b>5.3</b> Practice Exercise 3</a></li>
<li class="chapter" data-level="5.4" data-path="practice-exercises.html"><a href="practice-exercises.html#sample-code-for-practice-exercises"><i class="fa fa-check"></i><b>5.4</b> Sample Code for Practice Exercises</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="practice-exercises.html"><a href="practice-exercises.html#sample-code-for-exercise-2"><i class="fa fa-check"></i><b>5.4.1</b> Sample Code for Exercise 2</a></li>
<li class="chapter" data-level="5.4.2" data-path="practice-exercises.html"><a href="practice-exercises.html#sample-code-for-exercise-3"><i class="fa fa-check"></i><b>5.4.2</b> Sample Code for Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="conclusion.html"><a href="conclusion.html#wrapping-up"><i class="fa fa-check"></i><b>6.1</b> Wrapping Up</a></li>
<li class="chapter" data-level="6.2" data-path="conclusion.html"><a href="conclusion.html#useful-reading-and-resources"><i class="fa fa-check"></i><b>6.2</b> Useful Reading and Resources</a></li>
<li class="chapter" data-level="6.3" data-path="conclusion.html"><a href="conclusion.html#final-considerations"><i class="fa fa-check"></i><b>6.3</b> Final Considerations</a></li>
<li class="chapter" data-level="6.4" data-path="conclusion.html"><a href="conclusion.html#acknowledgement"><i class="fa fa-check"></i><b>6.4</b> Acknowledgement</a></li>
<li class="chapter" data-level="6.5" data-path="conclusion.html"><a href="conclusion.html#references"><i class="fa fa-check"></i><b>6.5</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Guide to Mapping ICPSR Data in R Studio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="practice-exercises" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Practice Exercises</h1>
<p>In this section you’ll have the opportunity to apply what you learned in the tutorial provided in Section 4, and practice some of your skills. The following three exercises are arrayed in order of increasing difficulty.</p>
<div id="practice-exercise-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Practice Exercise 1</h2>
<p>Modify the map we made in Section 4 in the following ways:</p>
<ul>
<li>Change the color scheme. What rationale informed your choice of this color scheme?</li>
<li>Change the legend breaks. Why did you chose the legend breaks that you did?</li>
<li>Replace your name with the current name in the “Map Credits” section.</li>
</ul>
<p>What spatial patterns do you notice in this map? Are there any patterns of clustering or dispersion that you find interesting? Do you notice anything surprising or unexpected? And, what future research questions might this map suggest?</p>
</div>
<div id="practice-exercise-2" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Practice Exercise 2</h2>
<p>Use the same dataset we used in Section 4, but this time please make a map of the country-level average of the “Rigidity_Public_Health” variable.</p>
<p>What spatial patterns do you notice in this map? Are there any patterns of clustering or dispersion that you find interesting? Do you notice anything surprising or unexpected? And, what future research questions might this map suggest?</p>
</div>
<div id="practice-exercise-3" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Practice Exercise 3</h2>
<p>Refer to the following <a href="https://www.openicpsr.org/openicpsr/project/121001/version/V1/view?path=/openicpsr/121001/fcr:versions/V1/Index_IPR_Agriculture.xlsx&amp;type=file">dataset</a>, entitled “Worldwide Index of IPRs [Intellectual Property Rights] in Agriculture, 1961-2018”, which is archived on ICPSR and authored by Mercedes Campi amd Alessandro Nuvolari.</p>
<p>Download the dataset, and make a map that shows country-level variation in the “Total_Index” variable in the year 2018.</p>
</div>
<div id="sample-code-for-practice-exercises" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Sample Code for Practice Exercises</h2>
<p>The sample code in this section assumes you’ve already loaded all of the packages discussed in the tutorial, and have correctly set your working directory to the directory in which the dataset(s) are located.</p>
<div id="sample-code-for-exercise-2" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Sample Code for Exercise 2</h3>
<p>The code below results in a dynamic webmap that represents cross-national variation in the scope of countries’ public health interventions (as measured by cross-national variation country-level average of the “Rigidity_Public_Health” variable), during the January to October 2020 time frame. The map uses a light orange to dark red color scheme in which lighter shades of orange represent low values of the index, and progressively darker shades of orange and red represent higher values of the index. Oceans in the dynamic map are represented with the color gray (a lighter shade of gray than what is used for countries without data), and the legend is located on the top-right of the map (above and to the right of Russia). The plus/minus buttons located on the top-left of the map can be used to zoom in and out of the map.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="practice-exercises.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import &quot;Dataset&quot; sheet from ICPSR Excel file into R Studio, and assign the dataset to an object called &quot;covid_data&quot;</span></span>
<span id="cb55-2"><a href="practice-exercises.html#cb55-2" aria-hidden="true" tabindex="-1"></a>covid_data<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;Gov_Responses2Covid19_last.xlsx&quot;</span>, <span class="at">sheet=</span><span class="st">&quot;Dataset&quot;</span>)</span>
<span id="cb55-3"><a href="practice-exercises.html#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="practice-exercises.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Brings spatial dataset of country boundaries into R environment using the rnaturalearth package and assigns it to object named &quot;country_boundaries&quot;</span></span>
<span id="cb55-5"><a href="practice-exercises.html#cb55-5" aria-hidden="true" tabindex="-1"></a>country_boundaries<span class="ot">&lt;-</span><span class="fu">ne_countries</span>(<span class="at">scale=</span><span class="st">&quot;medium&quot;</span>, <span class="at">returnclass=</span><span class="st">&quot;sf&quot;</span>)</span>
<span id="cb55-6"><a href="practice-exercises.html#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="practice-exercises.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Deletes Antarctica from &quot;country_boundaries&quot; object</span></span>
<span id="cb55-8"><a href="practice-exercises.html#cb55-8" aria-hidden="true" tabindex="-1"></a>country_boundaries<span class="ot">&lt;-</span>country_boundaries <span class="sc">%&gt;%</span> <span class="fu">filter</span>(iso_a3 <span class="sc">!=</span><span class="st">&quot;ATA&quot;</span>)</span>
<span id="cb55-9"><a href="practice-exercises.html#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="practice-exercises.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Selects &quot;iso&quot; and &quot;Rigidity_Public_Health&quot; variables from ICPSR Covid Dataset, and assigns this dataset to new object named &quot;covid_data_public_health&quot; </span></span>
<span id="cb55-11"><a href="practice-exercises.html#cb55-11" aria-hidden="true" tabindex="-1"></a>covid_data_public_health<span class="ot">&lt;-</span>covid_data <span class="sc">%&gt;%</span> </span>
<span id="cb55-12"><a href="practice-exercises.html#cb55-12" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">select</span>(iso, Rigidity_Public_Health) </span>
<span id="cb55-13"><a href="practice-exercises.html#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="practice-exercises.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Changes class of &quot;Rigidity_Public_Health&quot; field in &quot;covid_data_public_health&quot; from character to numeric</span></span>
<span id="cb55-15"><a href="practice-exercises.html#cb55-15" aria-hidden="true" tabindex="-1"></a>covid_data_public_health<span class="sc">$</span>Rigidity_Public_Health<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(covid_data_public_health<span class="sc">$</span>Rigidity_Public_Health)</span>
<span id="cb55-16"><a href="practice-exercises.html#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="practice-exercises.html#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculates country-level averages for &quot;Rigidity_Public_Health&quot; index, and then assigns this dataset of country-level averages to a new object called &quot;covid_data_PH_avg&quot;. </span></span>
<span id="cb55-18"><a href="practice-exercises.html#cb55-18" aria-hidden="true" tabindex="-1"></a>covid_data_PH_avg<span class="ot">&lt;-</span>covid_data_public_health <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(iso) <span class="sc">%&gt;%</span> </span>
<span id="cb55-19"><a href="practice-exercises.html#cb55-19" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">summarize</span>(<span class="at">mean_public_health=</span><span class="fu">mean</span>(Rigidity_Public_Health, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb55-20"><a href="practice-exercises.html#cb55-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-21"><a href="practice-exercises.html#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Join dataset with country-level means for &quot;Rigidity_Public_Health&quot; index (&quot;covid_data_PH_avg&quot; ) to spatial dataset of world boundaries (&quot;country_boundaries&quot;), based on common 3-Digit ISO Codes; then relocate &quot;name&quot; and &quot;mean_economic&quot; fields to the beginning of the dataset so that they&#39;re displayed on the map</span></span>
<span id="cb55-22"><a href="practice-exercises.html#cb55-22" aria-hidden="true" tabindex="-1"></a>worldmap_covid_data_PH<span class="ot">&lt;-</span><span class="fu">full_join</span>(country_boundaries, covid_data_PH_avg, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;iso_a3&quot;</span><span class="ot">=</span><span class="st">&quot;iso&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-23"><a href="practice-exercises.html#cb55-23" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">relocate</span>(name, mean_public_health)</span>
<span id="cb55-24"><a href="practice-exercises.html#cb55-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-25"><a href="practice-exercises.html#cb55-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Make map and assign to new object called &quot;covid_PH_webmap&quot;</span></span>
<span id="cb55-26"><a href="practice-exercises.html#cb55-26" aria-hidden="true" tabindex="-1"></a>covid_public_health<span class="ot">&lt;-</span><span class="fu">tm_shape</span>(worldmap_covid_data_PH)<span class="sc">+</span></span>
<span id="cb55-27"><a href="practice-exercises.html#cb55-27" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;mean_public_health&quot;</span>, </span>
<span id="cb55-28"><a href="practice-exercises.html#cb55-28" aria-hidden="true" tabindex="-1"></a>                              <span class="at">n=</span><span class="dv">5</span>, </span>
<span id="cb55-29"><a href="practice-exercises.html#cb55-29" aria-hidden="true" tabindex="-1"></a>                              <span class="at">style=</span><span class="st">&quot;jenks&quot;</span>, </span>
<span id="cb55-30"><a href="practice-exercises.html#cb55-30" aria-hidden="true" tabindex="-1"></a>                              <span class="at">palette=</span><span class="st">&quot;Oranges&quot;</span>,</span>
<span id="cb55-31"><a href="practice-exercises.html#cb55-31" aria-hidden="true" tabindex="-1"></a>                              <span class="at">textNA=</span><span class="st">&quot;No Data&quot;</span>,</span>
<span id="cb55-32"><a href="practice-exercises.html#cb55-32" aria-hidden="true" tabindex="-1"></a>                              <span class="at">title=</span><span class="st">&quot;Mean of Covid </span><span class="sc">\n</span><span class="st">Public Health Intervention Index</span><span class="sc">\n</span><span class="st">(1/1/2020 to</span><span class="sc">\n</span><span class="st">10/1/2020)&quot;</span>)<span class="sc">+</span></span>
<span id="cb55-33"><a href="practice-exercises.html#cb55-33" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>,</span>
<span id="cb55-34"><a href="practice-exercises.html#cb55-34" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.outside=</span><span class="cn">TRUE</span>,        <span class="co"># Puts legend outside map frame</span></span>
<span id="cb55-35"><a href="practice-exercises.html#cb55-35" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.outside.position=</span><span class="fu">c</span>(<span class="st">&quot;bottom&quot;</span>),</span>
<span id="cb55-36"><a href="practice-exercises.html#cb55-36" aria-hidden="true" tabindex="-1"></a>                            <span class="at">main.title=</span><span class="st">&quot;Stringency of Public Health Interventions to Combat Covid-19&quot;</span>,</span>
<span id="cb55-37"><a href="practice-exercises.html#cb55-37" aria-hidden="true" tabindex="-1"></a>                            <span class="at">main.title.size=</span><span class="dv">1</span>,</span>
<span id="cb55-38"><a href="practice-exercises.html#cb55-38" aria-hidden="true" tabindex="-1"></a>                            <span class="at">main.title.position=</span><span class="st">&quot;center&quot;</span>,</span>
<span id="cb55-39"><a href="practice-exercises.html#cb55-39" aria-hidden="true" tabindex="-1"></a>                            <span class="at">inner.margins=</span><span class="fu">c</span>(<span class="fl">0.06</span>,<span class="fl">0.10</span>,<span class="fl">0.10</span>,<span class="fl">0.08</span>),</span>
<span id="cb55-40"><a href="practice-exercises.html#cb55-40" aria-hidden="true" tabindex="-1"></a>                            <span class="at">attr.outside=</span><span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb55-41"><a href="practice-exercises.html#cb55-41" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_credits</span>(<span class="st">&quot;Map Author: YOUR_NAME</span><span class="sc">\n</span><span class="st">Dataset Author: Simon Porcher</span><span class="sc">\n</span><span class="st">CRS: WGS1984</span><span class="sc">\n</span><span class="st">Source: ICPSR&quot;</span>, <span class="co"># Sets text for map credits</span></span>
<span id="cb55-42"><a href="practice-exercises.html#cb55-42" aria-hidden="true" tabindex="-1"></a>             <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.78</span>,<span class="dv">0</span>), <span class="co"># Specifies location of map credits</span></span>
<span id="cb55-43"><a href="practice-exercises.html#cb55-43" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">0.38</span>)          <span class="co"># Specifies font size of credits text</span></span>
<span id="cb55-44"><a href="practice-exercises.html#cb55-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-45"><a href="practice-exercises.html#cb55-45" aria-hidden="true" tabindex="-1"></a><span class="co"># display map object in view mode</span></span>
<span id="cb55-46"><a href="practice-exercises.html#cb55-46" aria-hidden="true" tabindex="-1"></a>covid_public_health</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
</div>
<div id="sample-code-for-exercise-3" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Sample Code for Exercise 3</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="practice-exercises.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Tabular Data and assign to object named &quot;IPR_data&quot; </span></span>
<span id="cb56-2"><a href="practice-exercises.html#cb56-2" aria-hidden="true" tabindex="-1"></a>IPR_data<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;Index_IPR_Agriculture.xlsx&quot;</span>, <span class="at">sheet=</span><span class="st">&quot;Total_Index&quot;</span>)</span>
<span id="cb56-3"><a href="practice-exercises.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(IPR_data)</span>
<span id="cb56-4"><a href="practice-exercises.html#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="practice-exercises.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Spatial Data and assign to object named &quot;country_boundaries&quot; </span></span>
<span id="cb56-6"><a href="practice-exercises.html#cb56-6" aria-hidden="true" tabindex="-1"></a>country_boundaries<span class="ot">&lt;-</span><span class="fu">ne_countries</span>(<span class="at">scale=</span><span class="st">&quot;medium&quot;</span>, <span class="at">returnclass=</span><span class="st">&quot;sf&quot;</span>)</span>
<span id="cb56-7"><a href="practice-exercises.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(country_boundaries)</span>
<span id="cb56-8"><a href="practice-exercises.html#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="practice-exercises.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Delete Antarctica from &quot;country_boundaries&quot; </span></span>
<span id="cb56-10"><a href="practice-exercises.html#cb56-10" aria-hidden="true" tabindex="-1"></a>country_boundaries<span class="ot">&lt;-</span>country_boundaries <span class="sc">%&gt;%</span> <span class="fu">filter</span>(iso_a3 <span class="sc">!=</span><span class="st">&quot;ATA&quot;</span>)</span>
<span id="cb56-11"><a href="practice-exercises.html#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="practice-exercises.html#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Check class of Index field in &quot;IPR_data&quot; and confirm it&#39;s numeric</span></span>
<span id="cb56-13"><a href="practice-exercises.html#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(IPR_data<span class="sc">$</span><span class="st">`</span><span class="at">Total Index</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="practice-exercises.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select 2018 Observations from &quot;IPR_data&quot; and assign to new object named &quot;IPR_data_2018&quot;</span></span>
<span id="cb58-2"><a href="practice-exercises.html#cb58-2" aria-hidden="true" tabindex="-1"></a>IPR_data_2018<span class="ot">&lt;-</span>IPR_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2018</span>)</span>
<span id="cb58-3"><a href="practice-exercises.html#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="practice-exercises.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View &quot;IPR_data_2018&quot; in R Studio Data Viewer</span></span>
<span id="cb58-5"><a href="practice-exercises.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(IPR_data_2018) </span>
<span id="cb58-6"><a href="practice-exercises.html#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="practice-exercises.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Join &quot;Datasets&quot;IPR_data-2018&quot; to &quot;country_boundaries&quot; based on common ISO codes, and then assign the product of the join to a new object named &quot;spatial_IPR_2018.&quot;</span></span>
<span id="cb58-8"><a href="practice-exercises.html#cb58-8" aria-hidden="true" tabindex="-1"></a>spatial_IPR_2018<span class="ot">&lt;-</span><span class="fu">full_join</span>(country_boundaries, IPR_data_2018, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;iso_a3&quot;</span><span class="ot">=</span><span class="st">&quot;Country_code&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-9"><a href="practice-exercises.html#cb58-9" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">relocate</span>(Country, <span class="st">&#39;Total Index&#39;</span>)</span>
<span id="cb58-10"><a href="practice-exercises.html#cb58-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-11"><a href="practice-exercises.html#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Make map of variation in agricultural IPR index in 2018, and assign to new object named &quot;IPR_2018_map&quot;</span></span>
<span id="cb58-12"><a href="practice-exercises.html#cb58-12" aria-hidden="true" tabindex="-1"></a>IPR_2018_map<span class="ot">&lt;-</span><span class="fu">tm_shape</span>(spatial_IPR_2018)<span class="sc">+</span></span>
<span id="cb58-13"><a href="practice-exercises.html#cb58-13" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;Total Index&quot;</span>,</span>
<span id="cb58-14"><a href="practice-exercises.html#cb58-14" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n=</span><span class="dv">6</span>, </span>
<span id="cb58-15"><a href="practice-exercises.html#cb58-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">style=</span><span class="st">&quot;jenks&quot;</span>, </span>
<span id="cb58-16"><a href="practice-exercises.html#cb58-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">palette=</span><span class="st">&quot;PuBu&quot;</span>,</span>
<span id="cb58-17"><a href="practice-exercises.html#cb58-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">title=</span><span class="st">&quot;Agriculture IPR</span><span class="sc">\n</span><span class="st">Index, 2018&quot;</span>)<span class="sc">+</span></span>
<span id="cb58-18"><a href="practice-exercises.html#cb58-18" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>,</span>
<span id="cb58-19"><a href="practice-exercises.html#cb58-19" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.outside=</span><span class="cn">TRUE</span>,</span>
<span id="cb58-20"><a href="practice-exercises.html#cb58-20" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.outside.position=</span><span class="fu">c</span>(<span class="st">&quot;bottom&quot;</span>),</span>
<span id="cb58-21"><a href="practice-exercises.html#cb58-21" aria-hidden="true" tabindex="-1"></a>                          <span class="at">main.title =</span> <span class="st">&quot;Strength of Intellectual Property Protection in Agriculture, 2018&quot;</span>,</span>
<span id="cb58-22"><a href="practice-exercises.html#cb58-22" aria-hidden="true" tabindex="-1"></a>                          <span class="at">main.title.position =</span> <span class="st">&quot;Center&quot;</span>,</span>
<span id="cb58-23"><a href="practice-exercises.html#cb58-23" aria-hidden="true" tabindex="-1"></a>                          <span class="at">main.title.size=</span><span class="dv">1</span>,</span>
<span id="cb58-24"><a href="practice-exercises.html#cb58-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">inner.margins=</span><span class="fu">c</span>(<span class="fl">0.06</span>,<span class="fl">0.10</span>,<span class="fl">0.10</span>,<span class="fl">0.08</span>),</span>
<span id="cb58-25"><a href="practice-exercises.html#cb58-25" aria-hidden="true" tabindex="-1"></a>                          <span class="at">attr.outside=</span><span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb58-26"><a href="practice-exercises.html#cb58-26" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_credits</span>(<span class="st">&quot;Map Author: YOUR NAME</span><span class="sc">\n</span><span class="st">Dataset Author: Mercedes Campi</span><span class="sc">\n</span><span class="st">CRS:WGS84</span><span class="sc">\n</span><span class="st">Source:ICPSR&quot;</span>,</span>
<span id="cb58-27"><a href="practice-exercises.html#cb58-27" aria-hidden="true" tabindex="-1"></a>                           <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.78</span>,<span class="dv">0</span>),</span>
<span id="cb58-28"><a href="practice-exercises.html#cb58-28" aria-hidden="true" tabindex="-1"></a>                           <span class="at">size=</span><span class="fl">0.38</span>)</span>
<span id="cb58-29"><a href="practice-exercises.html#cb58-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Open &quot;IPR_2018_map&quot; </span></span>
<span id="cb58-30"><a href="practice-exercises.html#cb58-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-31"><a href="practice-exercises.html#cb58-31" aria-hidden="true" tabindex="-1"></a>IPR_2018_map</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-58-1.png" title="Choropleth world map showing cross-national variation in IPR index in 2018; light to dark-blue color scheme with lighter shades of blue representing lower values of the index and darker shades of blue representing higher values; countries without data are filled in with gray The map legend is a vertical bar that displays values using discrete color categories with 6 break points and intervals defined by the Jenks algorithm. The legend is displayed on the bottom-left of the map below and to the left of South America. There is no map frame surrounding the map. The legend is titled 'Agriculture IPR Index, 2018', and this title is placed over the vertical legend bar. The map's main title is 'Strength of Intellectual Property Protection in Agriculture, 2018', and is displayed in one line at the top of the map above the northern-most countries. The map map credits are split across four lines, and printed on the bottom-right of the map below Australia and New Zealand." alt="Choropleth world map showing cross-national variation in IPR index in 2018; light to dark-blue color scheme with lighter shades of blue representing lower values of the index and darker shades of blue representing higher values; countries without data are filled in with gray The map legend is a vertical bar that displays values using discrete color categories with 6 break points and intervals defined by the Jenks algorithm. The legend is displayed on the bottom-left of the map below and to the left of South America. There is no map frame surrounding the map. The legend is titled 'Agriculture IPR Index, 2018', and this title is placed over the vertical legend bar. The map's main title is 'Strength of Intellectual Property Protection in Agriculture, 2018', and is displayed in one line at the top of the map above the northern-most countries. The map map credits are split across four lines, and printed on the bottom-right of the map below Australia and New Zealand." width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tutorial.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aranganath24/icpsr_mapping_manual/edit/master/05-practice-challenge.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/aranganath24/icpsr_mapping_manual/blob/master/05-practice-challenge.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
